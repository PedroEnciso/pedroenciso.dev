---
import { getCollection } from 'astro:content';
import TechItem from './TechItem.astro'

const allProjects = await getCollection('projects');
---

<div>
  <h2>Projects</h2>
  <ul class="project-wrapper">
    {allProjects.map(project => (
      <li class="project-content-wrapper">
        <div class="name-link-wrapper">
          <p class="project-name">{project.data.name}</p>  
          <div class="link-wrapper">
            {project.data.siteLink ? 
              <a href={project.data.siteLink} class="link">
                view site 
                <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m9.001 10.978h-3.251c-.412 0-.75-.335-.75-.752 0-.188.071-.375.206-.518 1.685-1.775 4.692-4.945 6.069-6.396.189-.2.452-.312.725-.312.274 0 .536.112.725.312 1.377 1.451 4.385 4.621 6.068 6.396.136.143.207.33.207.518 0 .417-.337.752-.75.752h-3.251v9.02c0 .531-.47 1.002-1 1.002h-3.998c-.53 0-1-.471-1-1.002zm7.506-1.5-4.507-4.751-4.507 4.751h3.008v10.022h2.998v-10.022z" fill-rule="nonzero"/></svg>
              </a> : null}
            <a href={project.data.githubLink} class="link">
              github
              <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m9.001 10.978h-3.251c-.412 0-.75-.335-.75-.752 0-.188.071-.375.206-.518 1.685-1.775 4.692-4.945 6.069-6.396.189-.2.452-.312.725-.312.274 0 .536.112.725.312 1.377 1.451 4.385 4.621 6.068 6.396.136.143.207.33.207.518 0 .417-.337.752-.75.752h-3.251v9.02c0 .531-.47 1.002-1 1.002h-3.998c-.53 0-1-.471-1-1.002zm7.506-1.5-4.507-4.751-4.507 4.751h3.008v10.022h2.998v-10.022z" fill-rule="nonzero"/></svg>
            </a>
          </div>
        </div>
        <p class="project-description">{project.data.description}</p>
        <TechItem techList={project.data.techStack} />
      </li>
    ))}
  </ul>
</div>

<style>
  h2 {
    color: var(--text-light);
    margin-bottom: 2rem;
    font-size: 2rem;
    font-weight: 600;
  }

  ul {
    list-style: none;
  }

  .project-wrapper {
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }

  .project-content-wrapper {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .name-link-wrapper {
    display: flex;
    flex-direction: column;
    gap: .5rem;
  }

  .project-name {
    color: var(--text-light);
    font-size: 1.25rem;
    font-weight: 500;
    text-transform: capitalize;
  }

  .link-wrapper {
    display: flex;
    gap: 2rem;
  }

  .link {
    color: var(--accent-color);
    font-size: .875rem;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: .25rem;
  }

  .link:hover {
    text-decoration: underline;
  }

  .link svg {
    width: 18px;
    height: 18px;
    fill: var(--accent-color);
    transform: rotate(45deg);
  }

  .project-description {
    color: var(--text-light-default);
  }

</style>